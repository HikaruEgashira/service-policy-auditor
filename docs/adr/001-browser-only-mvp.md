# ADR-001: MVPはサーバーレスのブラウザ拡張機能として実装する

## Status
Accepted

## Context
AIサービスの利用状況を可視化し、プライバシーリスクを管理するツールを作りたい。

最終的なビジョンは法人向けCASB（Cloud Access Security Broker）だが、そこに至るまでに以下の課題がある：

1. **価値検証の必要性**: ユーザーが本当にこの機能を必要としているか不明
2. **導入障壁**: サーバー構築・運用は初期コストが高い
3. **プライバシー懸念**: ブラウジングデータをサーバーに送信することへの抵抗感
4. **個人ユーザーへのリーチ**: 法人向けだけでは利用者が限定される

## Decision
MVPは**端末完結型のブラウザ拡張機能**として実装する。サーバー連携は行わない。

## Alternatives Considered

### A. フルスタック（サーバー + 拡張機能）
- 利点: intelligence機能をすぐに提供可能
- 欠点: 開発・運用コスト大、プライバシー懸念

### B. プロキシ型
- 利点: すべてのトラフィックを監視可能
- 欠点: 導入が複雑、パフォーマンス影響、HTTPS終端の問題

### C. ブラウザ拡張機能のみ（採用）
- 利点: インストールのみで即利用可能、プライバシー保護、無料提供可能
- 欠点: ブラウザ依存、高度な分析には限界

## Consequences

### Positive
- ユーザーはインストールするだけで即座に価値を得られる
- 個人ユーザーに無料で提供し、PMFを検証できる
- ブラウジングデータは端末に留まり、プライバシーが保護される

### Negative
- プライバシーポリシーの構造化解析など高度な機能は提供できない
- サービス情報の共有（同じサービスを使う他ユーザーとの情報共有）ができない
- Cookie名からサービスを推定するintelligence機能が使えない

### Migration Path
将来のサーバー連携に備え、以下の構成とする：
- `packages/core`: 共通ロジック（型定義、パターンマッチング）
- `app/extension`: ブラウザ拡張機能
- `app/server`: 将来追加予定のintelligenceサーバー
